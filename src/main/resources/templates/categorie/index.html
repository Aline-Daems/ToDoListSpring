<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <title>Les catégories</title>
</head>
<body>

<div th:replace="header.html :: header"></div>

    <div class="accordion" id="accordionExample">
        <div class="accordion-item" th:each="categorie : ${categories}">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" th:text="${categorie.name}">

                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <p>Date de création</p>
                    <p th:text="${#temporals.format(categorie.creationDate, 'dd-MM-yyyy')}"></p>
                    <p>Date de mise à jour</p>
                    <p th:text="${#temporals.format(categorie.modificationDate, 'dd-MM-yyyy')}"></p>
                    <p>Liste des tâches associées :</p>
                    <ul class="list-group mb-2">
                        <li th:each="task : ${categorie.tasks}" th:text="${task.name}" class="list-group-item"></li>
                    </ul>
                    <p>Propriétaire :</p>

                        <p th:each="user : ${categorie.users}" th:text="${user.firstname}" class="list-group-item"></p>


                    <a  class="btn btn-outline-danger ms-1" th:href="@{/categorie/delete/{id}(id = ${categorie.id})}">Supprimer la catégorie</a>
                    <a  class="btn btn-outline-info ms-1" th:href="@{/categorie/update/{id}(id = ${categorie.id})}">Modifier la catégorie</a>

                </div>

            </div>
        </div>

    </div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>